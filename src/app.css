@import 'tailwindcss';

/* Tailwind v4 theme configuration using @theme */
@theme {
	/* Custom heights - for h-{name} utilities */
	--height-logo-sm: 60px;
	--height-logo-md: 66px;
	--height-logo-lg: 72px;

	/* Custom font sizes - for text-{name} utilities */
	--text-title-sm: 2.1rem;
	--text-title-md: 2.4rem;
	--text-title-lg: 2.7rem;

	/* Practice category colors - deeper, more saturated tones */
	--color-category-automation: #fef9c3;
	--color-category-behavior: #bae6fd;
	--color-category-behavior-enabled: #a7f3d0;
	--color-category-core: #e2e8f0;

	/* Accent category border colors */
	--color-category-automation-accent: #ca8a04;
	--color-category-behavior-accent: #0284c7;
	--color-category-behavior-enabled-accent: #059669;
	--color-category-core-accent: #64748b;

	/* Category pill background colors (accent at low opacity equivalent) */
	--color-category-automation-pill: #fef08a;
	--color-category-behavior-pill: #7dd3fc;
	--color-category-behavior-enabled-pill: #6ee7b7;
	--color-category-core-pill: #cbd5e1;

	/* Category progress bar fill colors */
	--color-category-automation-bar: #eab308;
	--color-category-behavior-bar: #0ea5e9;
	--color-category-behavior-enabled-bar: #10b981;
	--color-category-core-bar: #64748b;
}

/* Graph Node Sizing System - CSS Custom Properties */
:root {
	/* Node Width Variants */
	--node-width-tiny: 150px;
	/* Unselected nodes in tree view */
	--node-width-compact: 250px;
	/* Unselected dependencies in normal view */
	--node-width-standard: 400px;
	/* Ancestor and current practice nodes */
	--node-width-expanded: 482px;
	/* Selected nodes in tree view */

	/* Node Height Variants */
	--node-height-tiny: 80px;
	/* Unselected nodes in tree view */
	--node-height-compact: 162px;
	/* Unselected dependencies in normal view */
	--node-height-standard: auto;
	/* Ancestor and current practice (content-driven) */
	--node-height-expanded: 300px;
	/* Selected nodes in tree view (minimum) */

	/* Node Padding Variants - asymmetric: less horizontal, tighter bottom */
	--node-padding-tiny: 0.5rem 0.625rem;
	/* Compact padding for tiny nodes */
	--node-padding-standard: 0.625rem 0.75rem 0.5rem;
	/* Asymmetric: less horizontal, tighter bottom */

	/* Border Width Variants */
	--node-border-normal: 1px;
	/* Unselected compact nodes */
	--node-border-normal-thick: 2px;
	/* Unselected standard nodes */
	--node-border-selected: 2px;
	/* Selected compact nodes */
	--node-border-selected-thick: 3px;
	/* Selected standard nodes */

	/* Typography Variants */
	--node-title-tiny: 1rem;
	/* 16px - tiny node titles */
	--node-title-standard: 1.125rem;
	/* 18px - standard node titles */
	--node-text-tiny: 0.75rem;
	/* 12px - tiny node text */
	--node-text-small: 0.875rem;
	/* 14px - small node text */
	--node-text-standard: 1rem;
	/* 16px - standard node text */

	/* Spacing Variants - tighter vertical rhythm */
	--node-spacing-tiny: 0.125rem;
	/* 2px - spacing in tiny nodes */
	--node-spacing-small: 0.25rem;
	/* 4px - spacing in compact nodes */
	--node-spacing-standard: 0.5rem;
	/* 8px - spacing in standard nodes (was 12px) */
}

@layer base {
	:root {
		font-family:
			'DM Sans',
			-apple-system,
			BlinkMacSystemFont,
			'Segoe UI',
			sans-serif;
		line-height: 1.6;
	}

	html {
		overflow-x: hidden;
		max-width: 100vw;
	}

	body {
		@apply m-0 p-0 text-gray-300;
		background-color: #0f172a;
		overflow-x: hidden;
		max-width: 100vw;
		box-sizing: border-box;
	}

	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}
}

@layer components {
	/* Subtle dot grid background for depth */
	.bg-grid-pattern {
		background-image: radial-gradient(
			circle at 1px 1px,
			rgba(148, 163, 184, 0.08) 1px,
			transparent 0
		);
		background-size: 24px 24px;
	}

	/* Graph Node Size Variants */
	/* Use data-node-size attribute to control node dimensions */

	/* Tiny nodes - unselected in tree view */
	[data-node-size='tiny'] {
		width: 100%;
		min-width: 120px;
		max-width: var(--node-width-tiny);
		min-height: var(--node-height-tiny);
		padding: var(--node-padding-tiny);
	}

	/* Compact nodes - unselected dependencies */
	[data-node-size='compact'] {
		width: 100%;
		max-width: var(--node-width-compact);
		max-height: var(--node-height-compact);
		padding: var(--node-padding-standard);
		overflow: hidden;
	}

	/* Standard nodes - ancestors and current practice */
	[data-node-size='standard'] {
		width: 100%;
		max-width: var(--node-width-standard);
		min-height: var(--node-height-standard);
		padding: var(--node-padding-standard);
	}

	/* Expanded nodes - selected in tree view */
	[data-node-size='expanded'] {
		width: 100%;
		max-width: var(--node-width-expanded);
		min-height: var(--node-height-expanded);
		padding: var(--node-padding-standard);
	}

	/* Selected dependency nodes - responsive width */
	[data-node-size='selected-dependency'] {
		width: 100%;
		padding: var(--node-padding-standard);

		@media (min-width: 768px) {
			width: 66.666667%;
			/* 2/3 */
		}

		@media (min-width: 1024px) {
			width: 50%;
			/* 1/2 */
		}
	}

	/* Accent left border on ALL cards for instant category recognition */
	[data-node-size].bg-category-automation {
		border-left: 3px solid var(--color-category-automation-accent);
	}
	[data-node-size].bg-category-behavior {
		border-left: 3px solid var(--color-category-behavior-accent);
	}
	[data-node-size].bg-category-behavior-enabled {
		border-left: 3px solid var(--color-category-behavior-enabled-accent);
	}
	[data-node-size].bg-category-core {
		border-left: 3px solid var(--color-category-core-accent);
	}

	/* Border variants based on selection and compact state */
	[data-node-size='tiny'][data-selected='false'],
	[data-node-size='compact'][data-selected='false'] {
		border-width: var(--node-border-normal);
		border-color: rgba(0, 0, 0, 0.15);
	}

	[data-node-size='standard'][data-selected='false'],
	[data-node-size='expanded'][data-selected='false'],
	[data-node-size='selected-dependency'][data-selected='false'] {
		border-width: var(--node-border-normal-thick);
		border-color: rgba(0, 0, 0, 0.12);
	}

	/* Re-apply accent left border on unselected (overrides border-width reset) */
	[data-node-size][data-selected='false'].bg-category-automation {
		border-left: 3px solid var(--color-category-automation-accent);
	}
	[data-node-size][data-selected='false'].bg-category-behavior {
		border-left: 3px solid var(--color-category-behavior-accent);
	}
	[data-node-size][data-selected='false'].bg-category-behavior-enabled {
		border-left: 3px solid var(--color-category-behavior-enabled-accent);
	}
	[data-node-size][data-selected='false'].bg-category-core {
		border-left: 3px solid var(--color-category-core-accent);
	}

	[data-node-size='tiny'][data-selected='true'],
	[data-node-size='compact'][data-selected='true'] {
		border-width: var(--node-border-selected);
		border-color: #2563eb;
		/* blue-600 */
	}

	[data-node-size='standard'][data-selected='true'],
	[data-node-size='expanded'][data-selected='true'],
	[data-node-size='selected-dependency'][data-selected='true'] {
		border-width: var(--node-border-selected-thick);
		border-color: #2563eb;
		/* blue-600 */
		max-width: 400px;
		/* Limit selected card width */
		box-shadow:
			0 0 0 1px rgba(37, 99, 235, 0.2),
			0 4px 20px rgba(37, 99, 235, 0.15),
			0 8px 32px rgba(0, 0, 0, 0.3);
	}

	/* Category accent top bar on selected cards (in addition to left border) */
	[data-selected='true'].bg-category-automation {
		border-top: 3px solid var(--color-category-automation-accent);
		border-left: 3px solid var(--color-category-automation-accent);
	}
	[data-selected='true'].bg-category-behavior {
		border-top: 3px solid var(--color-category-behavior-accent);
		border-left: 3px solid var(--color-category-behavior-accent);
	}
	[data-selected='true'].bg-category-behavior-enabled {
		border-top: 3px solid var(--color-category-behavior-enabled-accent);
		border-left: 3px solid var(--color-category-behavior-enabled-accent);
	}
	[data-selected='true'].bg-category-core {
		border-top: 3px solid var(--color-category-core-accent);
		border-left: 3px solid var(--color-category-core-accent);
	}

	/* Typography scaling based on node size */
	[data-node-size='tiny'] h3 {
		font-size: var(--node-title-tiny);
		margin-bottom: var(--node-spacing-tiny);
	}

	[data-node-size='tiny'] p,
	[data-node-size='tiny'] li {
		font-size: var(--node-text-tiny);
	}

	[data-node-size='tiny'] .adoption-percentage,
	[data-node-size='tiny'] .dependency-count {
		font-size: var(--node-text-tiny);
	}

	[data-node-size='compact'] .adoption-percentage,
	[data-node-size='compact'] .dependency-count {
		font-size: var(--node-text-tiny);
	}

	/* Spacing adjustments based on node size */
	[data-node-size='tiny'] .node-section {
		margin-bottom: var(--node-spacing-tiny);
	}

	[data-node-size='compact'] .node-section {
		margin-bottom: var(--node-spacing-small);
	}

	[data-node-size='standard'] .node-section,
	[data-node-size='expanded'] .node-section,
	[data-node-size='selected-dependency'] .node-section {
		margin-bottom: var(--node-spacing-standard);
	}

	/* Card hover states for unselected nodes - category-aware */
	[data-node-size][data-selected='false'] {
		cursor: pointer;
		transition:
			transform 0.15s ease,
			box-shadow 0.15s ease,
			border-color 0.15s ease;
	}
	[data-node-size][data-selected='false'].bg-category-automation:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(202, 138, 4, 0.2);
		border-color: rgba(202, 138, 4, 0.5);
	}
	[data-node-size][data-selected='false'].bg-category-behavior:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(2, 132, 199, 0.2);
		border-color: rgba(2, 132, 199, 0.5);
	}
	[data-node-size][data-selected='false'].bg-category-behavior-enabled:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(5, 150, 105, 0.2);
		border-color: rgba(5, 150, 105, 0.5);
	}
	[data-node-size][data-selected='false'].bg-category-core:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(100, 116, 139, 0.2);
		border-color: rgba(100, 116, 139, 0.5);
	}
	/* Fallback hover for cards without category class */
	[data-node-size][data-selected='false']:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
	}

	/* Anti-pattern links section styling */
	.node-links-section {
		background: rgba(0, 0, 0, 0.03);
		border-radius: 6px;
		padding: 0.375rem 0.5rem;
		margin-top: 0.125rem;
	}
}

@layer utilities {
	/* Screen reader only utility - visually hidden but accessible */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}

	/* Undo sr-only on focus (for skip links) */
	.focus\:not-sr-only:focus {
		position: static;
		width: auto;
		height: auto;
		padding: inherit;
		margin: inherit;
		overflow: visible;
		clip: auto;
		white-space: normal;
	}
}
